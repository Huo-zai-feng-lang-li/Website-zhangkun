<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title> AIå›¾åƒç”Ÿæˆå™¨</title>
	<style>
		body {
			min-height: 100vh;
			background: linear-gradient(#03a9f4, #03a9f4 10%, #fff 50%, #fff 100%);
			display: flex;
			justify-content: center;
			align-items: flex-start;
			padding-top: 20px;
			overflow: auto;
		}

		.container {
			background: #fff;
			padding: 20px;
			border-radius: 12px;
			box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
			width: 400px;
			text-align: center;
			transition: box-shadow 0.3s ease;
		}

		.container:hover {
			box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
		}

		.input-group {
			margin: 10px;
		}

		.input-group label {
			display: block;
			margin-bottom: 5px;
			font-weight: bold;
			color: #555;
		}

		.input-group input {
			padding: 12px;
			border: 1px solid #ddd;
			border-radius: 6px;
			color: #333;
			transition: border-color 0.3s ease;
			width: 93%;


		}

		.input-group input:focus {
			border-color: #007BFF;
			outline: none;
		}

		.btn {
			padding: 12px 20px;
			background-color: #007BFF;
			color: #fff;
			border: none;
			border-radius: 6px;
			cursor: pointer;
			font-size: 14px;
			transition: background-color 0.3s ease;
		}

		.btn:hover {
			background-color: #0056b3;
		}

		.image-container {
			margin-top: 20px;
			border: 2px dashed #ddd;
			border-radius: 12px;
			overflow: hidden;
			max-width: 100%;
			position: relative;
		}

		.image-container img {
			width: 100%;
			height: auto;
			border-radius: 12px;
		}

		.progress-container {
			margin-top: 10px;
			width: 100%;
			position: relative;
		}

		.progress-bar {
			width: 0%;
			height: 10px;
			background-color: #007BFF;
			border-radius: 5px;
			transition: width 0.5s;
		}

		.progress-percentage {
			position: absolute;
			top: -20px;
			right: 0;
			font-size: 12px;
			color: #666;
		}

		.loading-text {
			font-size: 12px;
			color: #666;
			margin-top: 10px;
		}

		.donate-btn {
			padding: 10px 15px;
			background-color: #FFD700;
			color: #333;
			border: none;
			border-radius: 6px;
			cursor: pointer;
			font-size: 14px;
			transition: background-color 0.3s ease;
			margin-top: 10px;
		}

		.donate-btn:hover {
			background-color: #e0b800;
		}

		.donate-modal {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.5);
			justify-content: center;
			align-items: center;
			z-index: 1000;
		}

		.donate-modal-content {
			background: #fff;
			padding: 23px;
			border-radius: 12px;
			text-align: center;
			width: 300px;
			position: relative;
		}

		.donate-modal img {
			max-width: 100%;
			height: auto;
			border-radius: 8px;
		}

		.donate-modal-close {
			position: absolute;
			top: 10px;
			right: 10px;
			cursor: pointer;
			font-size: 20px;
			color: #333;
		}
	</style>
</head>

<body>
	<div class="container">
		<h2>AIå›¾åƒæ™ºèƒ½ç”Ÿæˆ</h2>
		<div class="input-group">
			<label for="content">è¯·å¡«å†™æè¿°æ–‡å­—ï¼š</label>
			<input type="text" id="content" placeholder="è¯·è¾“å…¥æè¿°æ–‡å­—ï¼Œä¾‹å¦‚ï¼šå°ç‹—åœ¨æ™’å¤ªé˜³">
		</div>
		<button class="btn" onclick="generateImage()">ç”Ÿæˆå›¾ç‰‡</button>
		<div class="progress-container">
			<div class="progress-bar"></div>
			<div class="progress-percentage">0%</div>
		</div>
		<div class="loading-text" id="loading-text" style="display: none;">åŠ è½½ä¸­è¯·ç¨ç­‰...</div>
		<div class="image-container">
			<img id="generated-image" src="" alt="ç”Ÿæˆçš„å›¾ç‰‡" style="display: none;">
		</div>
		<button class="donate-btn" onclick="showDonateModal()">æ‰“èµä½œè€…</button>
	</div>

	<!-- æ‰“èµå¼¹çª— -->
	<div class="donate-modal" id="donate-modal">
		<div class="donate-modal-content">
			<span class="donate-modal-close" onclick="closeDonateModal()">&times;</span>
			<img src="tj.png" alt="æ‰“èµäºŒç»´ç ">
			<p>æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼</p>
			<div class="donate-modal-countdown" id="donate-countdown">3ç§’åå¯å…³é—­</div>
		</div>
	</div>


	<script>
		const token = '1PNHyl1DsuF3WMgqjmggfAMJTyglnWN9H32VeEGF';
		const apiUrl = 'http://api.toolfk.com/api/text2img';

		async function generateImage() {
			const content = document.getElementById('content').value.trim();
			if (!content) {
				alert('è¯·è¾“å…¥æè¿°æ–‡å­—');
				return;
			}

			const progressBar = document.querySelector('.progress-bar');
			const progressPercentage = document.querySelector('.progress-percentage');
			const loadingText = document.getElementById('loading-text');
			progressBar.style.width = '10%';
			progressPercentage.innerText = '10%';
			loadingText.style.display = 'block';

			try {
				const response = await fetch(apiUrl, {
					method: 'POST',
					headers: {
						'Content-Type': 'application/x-www-form-urlencoded'
					},
					body: `token=${token}&content=${encodeURIComponent(content)}`
				});

				progressBar.style.width = '50%';
				progressPercentage.innerText = '50%';

				const data = await response.json();
				if (data.status === 1) {
					const imageElement = document.getElementById('generated-image');
					imageElement.src = data.data;
					imageElement.style.display = 'block';
					progressBar.style.width = '100%';
					progressPercentage.innerText = '100%';
				} else if (data.errmsg && data.errmsg.includes('è°ƒç”¨æ¬¡æ•°å·²ç”¨å®Œ')) {
					alert('ä»Šæ—¥è°ƒç”¨æ¬¡æ•°å·²ç”¨å®Œï¼Œè¯·æ˜å¤©å†æ¥ï¼');
				} else {
					alert('ç”Ÿæˆå¤±è´¥ï¼š' + data.errmsg);
				}
			} catch (error) {
				console.error('è¯·æ±‚å¤±è´¥ï¼š', error);
				alert('ç”Ÿæˆå¤±è´¥ï¼Œè¯·ç¨åå†è¯•ï¼');
			} finally {
				setTimeout(() => {
					progressBar.style.width = '0%';
					progressPercentage.innerText = '0%';
					loadingText.style.display = 'none';
				}, 1000);
			}
		}

		// æ˜¾ç¤ºæ‰“èµå¼¹çª—
		function showDonateModal() {
			const modal = document.getElementById('donate-modal');
			const countdownElement = document.getElementById('donate-countdown');
			const closeButton = modal.querySelector('.donate-modal-close');
			let countdown = 3;

			modal.style.display = 'flex';
			closeButton.disabled = true; // ç¦ç”¨å…³é—­æŒ‰é’®
			countdownElement.textContent = `è¿˜æœ‰${countdown}ç§’`; // åˆå§‹åŒ–å€’è®¡æ—¶æ–‡æœ¬

			// æ¸…é™¤ä¹‹å‰çš„å€’è®¡æ—¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
			clearInterval(closeButton.countdownInterval);

			// é‡æ–°å¯åŠ¨å€’è®¡æ—¶
			closeButton.countdownInterval = setInterval(() => {
				countdown--;
				countdownElement.textContent = `è¿˜æœ‰${countdown}ç§’`;

				if (countdown < 0) {
					clearInterval(closeButton.countdownInterval); // åœæ­¢å€’è®¡æ—¶
					countdownElement.textContent = "ç°åœ¨å¯ä»¥å…³é—­å•¦ï¼";
					closeButton.disabled = false; // å¯ç”¨å…³é—­æŒ‰é’®
				}
			}, 1000);

			// é‡ç½®å…³é—­å°è¯•æ¬¡æ•°
			closeButton.closeAttempts = 0;
		}

		// å…³é—­æ‰“èµå¼¹çª—
		function closeDonateModal() {
			const modal = document.getElementById('donate-modal');
			const countdownElement = document.getElementById('donate-countdown');
			const countdownText = countdownElement.textContent;
			const closeButton = modal.querySelector('.donate-modal-close');

			// å¦‚æœå€’è®¡æ—¶æœªç»“æŸï¼Œæç¤ºç”¨æˆ·å‰©ä½™æ—¶é—´
			if (countdownText.startsWith("è¿˜æœ‰")) {
				closeButton.closeAttempts++; // å¢åŠ å°è¯•å…³é—­çš„æ¬¡æ•°
				if (closeButton.closeAttempts >= 3) {
					alert("ä½œè€…ä¼¤å¿ƒåœ°å“­äº†ğŸ˜­ï¼Œæ‚¨çœŸçš„ä¸æƒ³æ”¯æŒä¸€ä¸‹å—ï¼Ÿ");
				} else {
					alert(countdownText);
				}
			} else {
				modal.style.display = 'none'; // å…³é—­å¼¹çª—
			}
		}
	</script>
</body>

</html>