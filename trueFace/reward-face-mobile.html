<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <link href="../home/style.css" rel="stylesheet">
    <title>å½©è‰²ä¹‹å¤–-çœŸå®¹</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: rgba(255, 255, 255, 0.4);
        }

        .container {
            padding: 0 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-width: 1000px;
            min-height: 100vh;
        }

        .form-container {
            border: 1px dotted #d0d0d0;
            box-shadow: rgba(255, 255, 255, 0.1) 0px 1px 1px 0px inset, rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px;
            margin: 15px 0 15px 0;
            border-radius: 5px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 700px;
            transition: all 0.3s ease-in-out;
        }

        .form-container:hover {
            box-shadow: initial;
        }


        ul {
            padding-left: 20px;
        }

        li {
            margin-bottom: 10px;
        }

        ol {
            padding-left: 20px;
        }

        ol li {
            margin-bottom: 5px;
        }

        #copyButton,
        #jumpButton {
            color: #84b9f1;
        }

        #copyButton:hover,
        #jumpButton:hover {
            color: #db7c10;
            cursor: pointer;
        }

        .form-container input,
        .form-container input {
            padding: 15px;
            margin: 10px;
            border: 1px solid #ccc;
            transition: border-color 0.3s, box-shadow 0.3s;
            width: 560px;
            border-radius: 5px;
        }

        .form-container input[type="number"]:focus,
        .form-container input[type="text"]:focus {
            box-shadow: 0 0 8px #84b9f1;
        }

        .form-container button {
            width: 40%;
            padding: 10px;
            margin-top: 10px;
            /* è°ƒæ•´æŒ‰é’®çš„ä¸Šè¾¹è· */
            margin-bottom: 10px;
            /* è°ƒæ•´æŒ‰é’®çš„ä¸‹è¾¹è· */
            border: none;
            border-radius: 5px;
            background-color: #4e4d4a;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #preview {
            background-color: #84b9f1;
        }

        .form-container button:hover {
            background-color: #dc9d14;
        }

        @media (max-width: 768px) {
            .container-face {
                display: none;
            }

            .container {
                display: flex;
                justify-content: flex-start !important;
                align-items: flex-start !important;
                width: 31px;
                height: 100%;

            }

            .form-container {
                width: initial;

            }

            .error-message {
                left: 50% !important;
            }
        }

        .face {
            margin-right: 50px;
            position: relative;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: #4e4d4a;
            display: flex;
            align-items: center;
            transition: all 0.6s;
            justify-content: center;
        }

        .face::before {
            content: '';
            position: absolute;
            content: attr(data-text);
            top: 180px;
            width: 150px;
            height: 70px;
            line-height: 40px;
            content: var(--face-before-content, '');
            background: var(--face-before-background, #b57700);
            border-bottom-left-radius: 70px;
            border-bottom-right-radius: 70px;
            font-size: 20px;
            transition: all 0.6s;
        }


        .face:hover:before {
            top: 210px;
            width: 150px;
            height: 20px;
            background: #b57700;
            border-bottom-left-radius: 0px;
            border-bottom-right-radius: 0px;
        }

        .eyes {
            position: relative;
            top: -40px;
            display: flex;
        }

        .eyes .eye {
            position: relative;
            width: 80px;
            height: 80px;
            display: block;
            background-color: #fff;
            margin: 0 15px;
            border-radius: 50%;
        }

        .eyes .eye::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 25px;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            background: #333;
            border-radius: 50%;
        }

        #result {
            width: 100%;
            overflow: auto;
            line-height: 25px;
        }

        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-10px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(10px);
                color: red;
            }
        }

        .shake {
            animation: shake .7s cubic-bezier(.36, .07, .19, .97) both;
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        /* PCè®¾å¤‡æç¤ºæ ·å¼ */
        .feedback-message-pc {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #f0f0f0;
            color: #333;
            padding: 8px 16px;
            border-radius: 4px;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        /* æ‰‹æœºè®¾å¤‡æç¤ºæ ·å¼ */
        .feedback-message-mobile {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #f0f0f0;
            color: #333;
            padding: 8px 16px;
            border-radius: 4px;
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .feedback-visible {
            display: block;
            opacity: 1;
        }


        /* é”™è¯¯æç¤ºæ ·å¼ */
        .error-message {
            position: fixed;
            top: 20px;
            left: 60%;
            transform: translateX(-50%);
            background-color: #ffcccc;
            color: #cc0000;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            /* é»˜è®¤ä¸æ˜¾ç¤º */
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .error-message.visible {
            display: block;
            opacity: 1;
        }

        /* å®šä¹‰æ»šåŠ¨æ¡çš„å®½åº¦å’Œè½¨é“é¢œè‰² */
        ::-webkit-scrollbar {
            width: 8px;
            /* æ»šåŠ¨æ¡çš„å®½åº¦ */
            height: 8px;
            /* æ°´å¹³æ»šåŠ¨æ¡çš„é«˜åº¦ */
        }




        /* å®šä¹‰æ»šåŠ¨æ¡è½¨é“çš„æ ·å¼ */
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            /* è½¨é“çš„èƒŒæ™¯é¢œè‰² */
        }

        /* å®šä¹‰æ»šåŠ¨æ¡æ»‘å—çš„æ ·å¼ */
        ::-webkit-scrollbar-thumb {
            background-image: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            /* æ»‘å—çš„èƒŒæ™¯é¢œè‰² */

        }

        /* å½“é¼ æ ‡æ‚¬åœåœ¨æ»šåŠ¨æ¡ä¸Šæ—¶ï¼Œæ”¹å˜æ»‘å—çš„é¢œè‰² */
        ::-webkit-scrollbar-thumb:hover {
            background-image: linear-gradient(0deg, #16d9e3 0%, #30c7ec 47%, #46aef7 100%);
            border-radius: 50%;
            /* é¼ æ ‡å°èƒ–æ‰‹ */
            cursor: pointer;


        }
    </style>
</head>

<body>
    <div class="container">
        <div class="container-face">
            <div class="face">
                <div class="eyes">
                    <div class="eye"></div>
                    <div class="eye"></div>
                </div>
            </div>
        </div>
        <form class="form-container" action="reward-face-main.html" method="post">
            <label for="ID">
                åˆ›å»ºID &nbsp; <input type="number" placeholder="è¯·è¾“å…¥ä½ çš„ID" id="ID" />
            </label>
            <label for="toJump">
                è·³è½¬URL
                <input type="text" placeholder="è¯·è¾“å…¥ä½ çš„è·³è½¬é“¾æ¥" id="toJump">
            </label>
            <button type="button" id="createUrl">ç”Ÿæˆé“¾æ¥</button>
            <div id="result">â™»ï¸:æš‚æ— é“¾æ¥&nbsp;<a href="" id="resultUrl"></a> </div>
            <button type="button" id="preview">æŸ¥çœ‹å›¾ç‰‡</button>
            <ul>
                <h4 style="margin-bottom: 20px;">å½©è‰²ä¹‹å¤–ã€ŠçœŸå®¹ã€‹åŠŸèƒ½ç®€ä»‹</h4>
                <li><strong>â˜…å¿…çœ‹è¯´æ˜â˜…</strong>
                    <p style="margin: 10px 0;">æœ¬ç½‘ç«™å®Œå…¨å…è´¹ã€å®Œå…¨å…è´¹ã€å®Œå…¨å…è´¹ï¼Œä»…ä¾›å¨±ä¹ï¼ä¸€åˆ‡æ”¶è´¹ï¼Œçš†ä¸ºéª—å­ï¼æ‰¾å¯»æ­¤ç½‘ç«™ï¼Œå¯åœ¨ <a
                            href="https://github.com/Huo-zai-feng-lang-li" target="_blank"> GitHub</a> æœç´¢ã€‚</p>
                </li>
                <li><strong>â˜…ä½¿ç”¨è¯´æ˜â˜…</strong>
                    <ol>
                        <li style="margin-top: 10px;">æ¡†å†…å¡«å†™QQå·ã€å¾®ä¿¡å·ç”Ÿæˆé“¾æ¥ï¼Œæ–¹ä¾¿è®°å¿†ï¼Œå‹¿è¾“å…¥ä¸­æ–‡ã€‚</li>
                        <li>ç‚¹å‡»ç”Ÿæˆé“¾æ¥åå¤åˆ¶ç”Ÿæˆçš„é“¾æ¥å‘é€ç»™è‡ªå·±æˆ–æƒ³è¦å‚ä¸è‡ªæ‹æµ‹è¯•çš„äººã€‚</li>
                        <li>é“¾æ¥è¢«ç‚¹å¼€åï¼Œå›åˆ°æœ¬é¡µé¢ï¼Œå¡«å†™å‰é¢è¾“å…¥çš„æ•°å­—(åºå·1ï¸âƒ£)ï¼Œç‚¹å‡»æŸ¥çœ‹ç…§ç‰‡å³å¯ï¼</li>
                        <li>ç”±äºç³»ç»Ÿå®‰å…¨æœºåˆ¶ï¼ŒiOSç³»ç»Ÿå¿…é¡»ä½¿ç”¨è‡ªå¸¦çš„Safariæµè§ˆå™¨ï¼ˆæˆ–è€…ç¬¬ä¸‰æ–¹APPè°ƒç”¨çš„æ˜¯Safariå†…æ ¸ï¼‰æ‰å¯ä½¿ç”¨ã€‚</li>
                        <li>iOSæ‰‹æœºè¾ƒè€ã€ç³»ç»Ÿè¾ƒè€å°†æ— æ³•ä½¿ç”¨ï¼Œå›¾ç‰‡ä¼šæ˜¾ç¤ºä¸€ç‰‡ç©ºç™½ã€‚å»ºè®®ä½¿ç”¨å®‰å“æ‰‹æœºã€‚</li>
                    </ol>
                </li>
                <li><strong>â˜…å…è´£å£°æ˜â˜…</strong>
                    <ol style="margin-top: 10px;">
                        <li>æœ¬ç¨‹åºå®Œå…¨å…è´¹ï¼Œä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ï¼Œè¯·å‹¿ç”¨äºéæ³•ç”¨é€”ï¼Œå¦åˆ™åæœè‡ªè´Ÿï¼</li>
                        <li>æœ¬ç¨‹åºæ˜¯ä¸€æ¬¾æµè§ˆå™¨è‡ªæ‹ç½‘ç«™ï¼Œæ˜¯ç”¨æˆ·è‡ªæ„¿ç‚¹å‡»å…è®¸çš„æƒ…å†µä¸‹è‡ªæ‹çš„ç¨‹åºï¼</li>
                        <li>æœ¬ç«™æ˜¯ä¸€ä¸ªå®Œå…¨å…è´¹çš„å­¦ä¹ äº¤æµå¹³å°ï¼Œä¸€åˆ‡å†…å®¹å‡ä¸ºç½‘å‹è‡ªå‘è¡Œä¸ºï¼Œè‚–åƒæƒå½’å±åŸä½œè€…æ‰€æœ‰ï¼ŒæŸ¥çœ‹ç…§ç‰‡åå¯ä»¥è‡ªå·±æ¸…ç©ºæ‰€æœ‰å›¾ç‰‡ï¼</li>
                    </ol>
                </li>
                <li>è¯·æ”¶è—æœ¬ç«™ä¹¦ç­¾ï¼Œä»¥é˜²ä¸¢å¤±ï¼</li>
            </ul>
        </form>
        <div id="feedbackMessage" class="feedback-message"></div>
    </div>

    <script>
        const bodyoverflow = document.body
        const face = document.querySelector('.face');
        const documentStyle = document.documentElement.style;
        // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯çš„å‡½æ•°
        function showError(message) {
            const errorMessage = document.createElement('div');
            bodyoverflow.style.overflow = 'hidden'
            errorMessage.className = 'error-message';
            face.style.backgroundImage = 'linear-gradient(90deg,#ff8177 0%, #ff867a 0%, #ff8c7f 21%, #f99185 52%, #cf556c 78%, #b12a5b 100%)'

            documentStyle.setProperty('--face-before-content', '"æ°”å¾—æˆ‘åŸºå°”å‘ç´«"');
            documentStyle.setProperty('--face-before-background', 'red');

            errorMessage.textContent = message;
            document.body.appendChild(errorMessage);
            setTimeout(() => {
                errorMessage.classList.add('visible');
            }, 10); // ç¨å¾®å»¶è¿Ÿæ˜¾ç¤ºï¼Œä»¥ä¾¿è¿‡æ¸¡æ•ˆæœèƒ½ç”Ÿæ•ˆ

            // 3ç§’åéšè—å¹¶ç§»é™¤é”™è¯¯æ¶ˆæ¯
            setTimeout(() => {
                documentStyle.setProperty('--face-before-content', '');
                documentStyle.setProperty('--face-before-background', '#b57700');
                bodyoverflow.style.overflow = 'auto'
                face.style.backgroundImage = 'initial'
                errorMessage.classList.remove('visible');
                setTimeout(() => {
                    document.body.removeChild(errorMessage);
                }, 300); // ç­‰å¾…æ·¡å‡ºåŠ¨ç”»å®Œæˆåç§»é™¤å…ƒç´ 
            }, 3000);
        }
        //é¼ æ ‡ç§»åŠ¨ Start
        document.querySelector('body').addEventListener('mousemove', eyeball)
        function eyeball() {
            let eyes = document.querySelectorAll('.eye')
            eyes.forEach(eye => {
                let x = (eye.getBoundingClientRect().left) + (eye.
                    clientWidth / 2)
                let y = (eye.getBoundingClientRect().top) + (eye.
                    clientHeight / 2)
                //Math.atan2()å‡½æ•°è¿”å›ç‚¹(x,y)å’ŒåŸç‚¹(g,8)ä¹‹é—´ç›´çº¿çš„å€¾æ–œè§’
                let radian = Math.atan2(event.pageX - x, event.pageY - y)
                //è½¬æ¢æˆè§’åº¦
                let rot = (radian * (180 / Math.PI) * -1) + 270
                eye.style.transform = `rotate(${rot}deg)`

            })
        }
        //é¼ æ ‡ç§»åŠ¨ End

        // é˜²æŠ–-ç”¨äºé”™è¯¯æç¤ºå»¶æ—¶
        function debounce(func, wait) {
            let timeout;
            return function () {
                const context = this, args = arguments;
                clearTimeout(timeout);
                timeout = setTimeout(() => {
                    func.apply(context, args);
                }, wait);
            };
        }
        // è¡¨å•
        document.addEventListener('DOMContentLoaded', function () {
            const generateButton = document.querySelector('#createUrl');
            const previewButton = document.querySelector('#preview');
            const idInput = document.getElementById('ID');
            const urlInput = document.getElementById('toJump');
            const feedback = document.createElement('div');
            const container = document.querySelector('.container');
            document.querySelector('.form-container').appendChild(feedback);
            feedback.style.color = 'red';
            let firstInvalid = true;

            function isValidHttpUrl(string) {
                let url;
                try {
                    url = new URL(string);
                } catch (_) {
                    return false;
                }
                return url.protocol === "http:" || url.protocol === "https:";
            }

            function triggerShake() {
                if (!firstInvalid) {
                    container.classList.add('shake');
                    container.addEventListener('animationend', () => {
                        container.classList.remove('shake');
                    });
                }
                firstInvalid = false;
            }
            function validateInputs() {
                const id = idInput.value.trim();
                const url = urlInput.value.trim();
                if (!id || !url) {
                    showError('IDæˆ–URLä¸èƒ½ä¸ºç©º');
                    return false;
                }
                if (/[^\x00-\x7F]+/.test(url)) {
                    showError('URLä¸èƒ½åŒ…å«ä¸­æ–‡æˆ–å…¶ä»–éASCIIå­—ç¬¦');
                    return false;
                }
                if (!isValidHttpUrl(url)) {
                    showError('URLæ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·è¾“å…¥æœ‰æ•ˆçš„httpæˆ–https URL');
                    return false;
                }
                return true;
            }
            const checkInputs = debounce(function () {
                const id = idInput.value.trim();
                const url = urlInput.value.trim();
                // console.log('ğŸ¤ºğŸ¤º id ğŸš€ ==>:', id);
                // console.log('ğŸ¤ºğŸ¤º url ğŸš€ ==>:', url);
                if (!id || !url) {
                    feedback.textContent = 'IDæˆ–URLä¸èƒ½ä¸ºç©º';
                    showError('IDæˆ–URLä¸èƒ½ä¸ºç©º');
                    triggerShake();
                    generateButton.disabled = true;
                    return;
                }
                if (/[^\x00-\x7F]+/.test(url)) {
                    feedback.textContent = 'URLä¸èƒ½åŒ…å«ä¸­æ–‡æˆ–å…¶ä»–éASCIIå­—ç¬¦';
                    showError('URLä¸èƒ½åŒ…å«ä¸­æ–‡æˆ–å…¶ä»–éASCIIå­—ç¬¦')
                    triggerShake();
                    generateButton.disabled = true;
                    return;
                }
                if (!isValidHttpUrl(url)) {
                    feedback.textContent = 'URLæ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·è¾“å…¥æœ‰æ•ˆçš„httpæˆ–https URL';
                    showError('URLæ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·è¾“å…¥æœ‰æ•ˆçš„httpæˆ–https URL')
                    triggerShake();
                    generateButton.disabled = true;
                    return;
                }
                feedback.textContent = '';
                generateButton.disabled = false;
            }, 800);//æ³¨æ„å’Œ.shake animation çš„æ—¶é—´ä¸€è‡´

            idInput.addEventListener('input', checkInputs);
            urlInput.addEventListener('input', checkInputs);


            generateButton.addEventListener('click', function (event) {
                event.preventDefault();
                checkInputs(); // å…ˆæ‰§è¡Œè¾“å…¥éªŒè¯
                const isValid = validateInputs();
                // console.log('ğŸ¤ºğŸ¤º generateButton.disabled ğŸš€ ==>:', generateButton.disabled);
                // æ£€æŸ¥æŒ‰é’®æ˜¯å¦ä»ç„¶è¢«ç¦ç”¨ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™ä¸ç»§ç»­æ‰§è¡Œ
                if (!isValid) {
                    container.classList.add('shake');
                    return;
                }
                // å¦‚æœè¾“å…¥æœ‰æ•ˆï¼Œç»§ç»­æ‰§è¡Œé“¾æ¥ç”Ÿæˆé€»è¾‘
                const id = idInput.value.trim();
                const url = encodeURIComponent(urlInput.value.trim());
                const resultUrl = `https://zhaoyaojing.wanxiangyuanma.com/capture.php?id=${id}&url=${url}`;
                const resultLink = document.getElementById('resultUrl');
                resultLink.href = resultUrl;
                resultLink.textContent = resultUrl;
                document.getElementById('result').innerHTML = `
                    ğŸ¤– <a href="${resultUrl}" id="resultUrl" 
                        target="_blank">${resultUrl}</a>
                        <span id="copyButton">âœ…å¤åˆ¶</span>
                        <span id="jumpButton">ğŸ‘ï¸è·³è½¬</span>
                    `;

                function isMobileDevice() {
                    return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
                }
                // å¤åˆ¶
                document.getElementById('copyButton').addEventListener('click', function () {
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(resultUrl).then(() => {
                            showFeedback('ğŸ¤–é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                        }).catch(err => {
                            fallbackCopyTextToClipboard(resultUrl);
                        });
                    } else {
                        // ä½¿ç”¨æ—§æ–¹æ³•
                        fallbackCopyTextToClipboard(resultUrl);
                    }
                });

                function showFeedback(message) {
                    const feedbackMessage = document.createElement('div');
                    document.body.appendChild(feedbackMessage);
                    feedbackMessage.textContent = message;
                    const feedbackClass = /Mobi|Android/i.test(navigator.userAgent) ? 'feedback-message-mobile' : 'feedback-message-pc';
                    feedbackMessage.className = `${feedbackClass} feedback-visible`;
                    setTimeout(() => {
                        feedbackMessage.classList.remove('feedback-visible');
                        document.body.removeChild(feedbackMessage);
                    }, 1500);
                }

                function fallbackCopyTextToClipboard(text) {
                    const textArea = document.createElement('textarea');
                    // è®¾ç½®textareaæ ·å¼ä½¿å…¶ä¸åœ¨å±å¹•ä¸Šæ˜¾ç¤º
                    textArea.style.position = 'fixed';  // ä½¿ç”¨fixedå®šä½
                    textArea.style.top = '0';           // å®šä½åˆ°é¡¶éƒ¨
                    textArea.style.left = '-9999px';    // ç§»å‡ºå¯è§†åŒºåŸŸ
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.focus();
                    textArea.select();
                    try {
                        const successful = document.execCommand('copy');
                        const msg = successful ? 'ğŸ¤–é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿' : 'ğŸ˜’å¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶';
                        showFeedback(msg);
                    } catch (err) {
                        showFeedback('ğŸ˜’å¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                    }
                    document.body.removeChild(textArea);
                }

                // æ·»åŠ è·³è½¬æŒ‰é’®çš„äº‹ä»¶ç›‘å¬å™¨
                document.getElementById('jumpButton').addEventListener('click', function () {
                    window.open(resultUrl, '_blank');
                });
            });

            previewButton.addEventListener('click', function () {
                const id = idInput.value.trim();
                if (!id) {
                    alert('ğŸ˜IDä¸èƒ½ä¸ºç©º');
                    return;
                }
                const galleryUrl = `https://zhaoyaojing.wanxiangyuanma.com/gallery.php?id=${id}`;
                window.open(galleryUrl, '_blank');
            });
        });
    </script>
</body>



</html>